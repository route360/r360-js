<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Route360° JavaScript API - Leaflet plugin for online network analysis</title>

    <!-- Bootstrap Core CSS -->
    <link href="styles/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="styles/freelancer.css" rel="stylesheet" type="text/css">
    <link href="styles/prettify.css" rel="stylesheet" type="text/css">

    <!-- Fonts -->
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link href='https://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>

    <!-- IE8 support for HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <link rel="stylesheet" href="styles/demo.css"/>
    <link rel="stylesheet" href="lib/leaflet/leaflet.css"/>
    <link rel="stylesheet" href="lib/jquery/jquery-ui-1.10.0.custom.css"/>
    <link rel="stylesheet" href="styles/r360.css"/>

    <style type="text/css">

        #newversion {

            position: absolute;
            z-index: 100001;
            background-color: red;
            color: white;
            margin-left: 40%;
            margin-right: 40%;
            width: 500px;
            padding: 10px;
        }
    </style>
</head>

<body id="page-top" class="index">
    <a target="_blank" href="https://github.com/route360/r360-js"><img style="z-index: 100000; position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"></a>

    <!-- <div id="newversion">Service not temporary not available due to maintenance work.</div> -->

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#page-top">
                    <img class="img-responsive" src="img/logo.png" style='float:left;width:50px;margin-top:-15px;margin-right:5px;' alt=""><span>
                    Route360° API</span></a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li class="hidden">
                        <a href="#page-top"></a>
                    </li>
                    <li class="page-scroll">
                        <a href="#gettingStarted">Getting started</a>
                    </li>
                    <li class="page-scroll">
                        <a href="#demo">Demo</a>
                    </li>
                    <li class="page-scroll">
                        <a href="#tutorials">Tutorials</a>
                    </li>
                    <li class="page-scroll">
                        <a href="#api">API</a>
                    </li>
                    <li class="page-scroll">
                        <a href="#maps">Maps</a>
                    </li>
                    <li class="page-scroll">
                        <a href="#faq">FAQ</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>

    <header>
        <div class="container" style="min-height: 850px;">
            <div class="row">
                <div class="col-lg-12">
                    <img class="img-responsive" src="img/profile.png" alt="">
                    <div class="intro-text">
                        <span class="name">Route360° JavaScript API</span>
                        <hr class="star-light">
                        <span class="skills">Large Geographic Network Analysis - Route Planning - Visualization</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <section id="gettingStarted">
        <div class="container">
            <div class="col-lg-12 text-center">
                <h2>Getting started</h2>
                <hr class="star-primary">
            </div>
            <p style="text-align:justify;">The Route360° JavaScript API is a modern open-source JavaScript library designed for Leaflet's mobile-friendly interactive maps. It is developed by Henning Hollburg and Daniel Gerber from the Motion Intelligence GmbH. <br> The API is free of charge and can be altered and forked as you wish. Since this API makes requests to the Route360° Webservice you need to contact us to get your application key. We provide a development version of the Route360° Webservice, which can be used for development purposes only, but we do not guarantee service uptime at any point.</p>
            <h3>Download the source or release</h3>
            <p>
                You can download a working example here. All you need to do, is to enter your API key at the specified point in the <i>basic.html</i> file. You can now open the <i>basic.html</i> in any browser.
                <form method="get" action="download/basic-example.zip">
                    <button type="submit" style="margin-right: 20px;" class="btn btn-default pull-left">Download basic example!</button>
                </form>
                <button type="submit" class="btn btn-default"><a style="text-decoration: none; color: white;" href="https://github.com/route360/r360-js/releases/latest">Download latest release!</a></button>
            </p>
            <p>You can install the libray using bower, just enter <code>bower install route360 --save</code>.</p>
            <div class="bs-callout bs-callout-info">
                <h4>Where is the code?</h4>
                <p>The <i>r360.js</i> (concatenated and minified) and the <i>r360-src.js</i> (human readable), as well as the <i>r360.css</i> are located in the <b>dist</b> directory of the downloaded release.</p>
            </div>
            <h3>Lets add some polygons</h3>
            <p>This basic example shows you how to add a marker to the map and display reachability polygons from this location. Note that we do not set a travel mode, this defaults to 'walk' for now.</p>
            <p>First we need to import all the necessary javascript and css files. You should download the latest Route360° JS API from the <a href="https://github.com/route360/r360-js/tree/master/dist">repository</a>. For jQuery and jQuery UI we strongly advise you to use the <a href="http://jquery-ui-bootstrap.github.io/jquery-ui-bootstrap/">jQuery UI Bootstrap</a> library. Leaflet can be found <a href="http://leafletjs.com/">here</a>.</p>
<pre class="prettyprint">
&lt;!--all the css stuff --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;lib/leaflet/leaflet.css&quot;/&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;lib/jquery/jquery-ui-1.9.2.custom.css&quot;/&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;css/r360.css&quot;/&gt;
&lt;!--  we need jquery and jquery ui (bootstrap version) --&gt;
&lt;script src=&quot;lib/jquery/jquery-1.8.3.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;lib/jquery/jquery-ui-1.9.2.custom.min.js&quot;&gt;&lt;/script&gt;
&lt;!--  leaflet is used as the base map technology --&gt;
&lt;script src=&quot;lib/leaflet/leaflet.js&quot;&gt;&lt;/script&gt;
&lt;!--  our favourite utility belt --&gt;
&lt;script src=&quot;js/underscore.js&quot;&gt;&lt;/script&gt;
&lt;!-- last but not least, our library --&gt;
&lt;script src=&quot;r360.js&quot;&gt;&lt;/script&gt;
</pre>
            <pre class="prettyprint" id='gettingstarted-code'>
            </pre>
            <p>Easy, right? You should see something like this:
                <div id="map-example1"></div>
            </p>
            <p>You can have a look at the complete example <a href="download/basic/basic_demo_key.html" target="_blank">here</a>.</p>
        </div>
    </section>

     <section class="success demo" id="demo">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2><a href="#demo" style="color:white; text-decoration: none;">Demo</a></h2>
                    <hr class="star-light">
                </div>
            </div>
            <div class="row">
                    <p>To showcase our API, we have implemented a demo which allows a user to find apartments in and around Berlin. These apartments are integrated from the <a href="http://www.immobilienscout24.de/">ImmobilienScout 24</a> API. A user can insert up to three points which represent important points (e.g. work, friends, boy/girlfriend, hacklab etc.) in his or her life. Our software is now able to show only these apartments that can be reach from all points in let's say 30 minutes or we can change the marker size according to travel times. You can try out the iframe below or get your hands real dirty with the three different version we are testing:
                        <ol>
                            <li><p><a href="http://demo.route360.net/ab-no_unreachable">Only reachable apartments</a> are shown</p></li>
                            <li><p>Show <a href="http://demo.route360.net/ab-pins">each marker</a> and scale the size according to travel times</p></li>
                            <li><p>Show all markers but in a <a href="http://demo.route360.net/ab-markercluster">clustered mode</a></p></li>
                        </ol>
                    <div class="bs-callout bs-callout-warning">
                        <h4>How can I help to make this even better?</h4>
                        <p>It would be absoulty awesome of you, if you could fill out this little <a style="color: #F20017" href="https://docs.google.com/forms/d/1yNdGnp7J_AHYNiPhNsSf85Tmx2qr2d6ocYrthO-_-XM/viewform">form</a>. It's really not that long and it would help us dramatically. Thank you!</p>
                    </div>
                 </p>
                <iframe id="demo-iframe" frameBorder="0" src="http://demo.route360.net/ab-no_unreachable/#/"></iframe>
            </div>
        </div>
    </section>


    <section class="tutorials" id="tutorials">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2><a href="#tutorials" style="color:white;">Tutorials</a></h2>
                    <hr class="star-light">
                </div>
            </div>
            <div class="row">
                <div class="col-lg-2">
                    <ul id="tutorial-menu" class="nav nav-pills nav-stacked">
                        <li class=""><a id="travelTimecontrol-nav" href="#travelTimecontrol">Travel time control</a></li>
                        <li><a id="traveltypecontrol-nav" href="#traveltypecontrol">Travel type control</a></li>
                        <li><a id="travelstartdatecontrol-nav" href="#travelstartdatecontrol">Travel date and time of day control</a></li>
                        <li><a id="geocodingcontrol-nav" href="#geocodingcontrol">Route360° geocoding service</a></li>
                        <li><a id="routing-nav" href="#routing">Routing in public transportation</a></li>
                        <li><a id="filter-nav" href="#filter">Filter by travel time</a></li>
                        <li><a id="multiple-nav" href="#multiple">Intersection of polygons</a></li>
                        <li><a id="inverse-nav" href="#inverse">Using black and white polygons</a></li>
                        <li><a id="htmlControl-nav" href="#htmlControl">Using a custom Html control</a></li>
                    </ul>
                </div>
                <div class="col-lg-10">
                    <div class="tab-pane active" id="tutorial-content">
                        <p>In this tutorial section we will demonstrate the basic usage of the Route360° JavaScript API. We will cover all services such as <code>PolygonService</code>, <code>RouteService</code> and <code>TimeService</code> as well as showing the predefined map controls. If you are looking for more detailed information about the services, how to configure them correctly or information on the utility classes, please have a look at the <a href="#api">API section</a>.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="success api" id="api">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>API</h2>
                    <hr class="star-light">
                </div>
            </div>
            <div class="row">
                <div class="col-lg-2">
                    <ul id="api-menu" class="nav nav-pills nav-stacked">
                        <li class=""><a href="#polygonservice" id="polygonservice-nav">PolygonService</a></li>
                        <!-- <li class=""><a href="#routeservice" id="routeservice-nav">RouteService</a></li>
                        <li class=""><a href="#timeservice" id="timeservice-nav">TimeService</a></li>
                        <li class=""><a href="#controls" id="controls-nav">Controls</a></li>
                        <li class=""><a href="#polygons" id="polygons-nav">(Multi)Polygons</a></li>
                        <li class=""><a href="#routes" id="routes-nav">Route(Segment)</a></li>
                        <li class=""><a href="#polygonlayer" id="polygonlayer-nav">PolygonLayer</a></li>
                        <li class=""><a href="#util" id="util-nav">Util</a></li>
                        <li class=""><a href="#i18n" id="i18n-nav">Localization</a></li> -->
                    </ul>
                </div>
                <div class="col-lg-10">
                    <div class="tab-pane active" id="api-content">
                        <p>
                            This sections gives an overview about the services, <code>PolygonService</code>, <code>RouteService</code> and <code>TimeService</code> currently offered by the Route360° JavaScript API. We discuss all the necessary and optional parameters. Hopefully this guide will help to port this JavaScript library to other programming languages. We present the internal data structure of the model, show the controls which can be used to configure API requests and show you how to localize your Route360-based application.
                        </p>
                    </div>
                    <div id="polygonservice-api" style="display:none;">
                        <h3>PolygonService</h3>
                        <p class="text-justify lead">
                            The <code>PolygonService</code> is used to query the Route360° Service to get travel time polygons starting from a specified source point or a list of source points. The service has only one method <code>getTravelTimePolygons</code> which takes a <code>TravelOptions</code> and a callback function as arguments. The service will only be executed if the travel options are configured properly, otherwise it will throw an error.
                        </p>
                        <h4>Mandatory arguments:</h4>
                        <h4>Sources</h4>
                        <p class="text-justify lead">
                            This has to be an array of objects. All objects have to have a <code>lat</code> and <code>lon</code> attribute, additionally you can supply an <code>id</code> attribute as well, to later find your source again. You can use the <code>TravelOptions.addSource(src)</code> to add one or <code>TravelOptions.setSources(src)</code> method to set all source points. If you set multiple source points you have to decide which polygon intersection mode you want to use. Furthermore you can set the travelType for each source point individually by setting a <code>travelType</code> to each source. The default intersection mode is average. The API supports three different modes:
                            <h4>union</h4>
                            <p class="text-justify lead">The <b>union</b> option basically means that no intersection of the polygons is performed. We merge the polygons generated on the server side to reduce file size. So each marker has its independet travel time polygons.</p>
                            <img class='img-responsive img-thumbnail' src="img/union.png">
                            <hr>
                            <h4>intersection</h4>
                            <p class="text-justify lead">The <b>intersection</b> option generates an intersection of the polygons generated for all source points. This means that no independent polygons exist anymore, e.g. the polygon representing the 10 minute area (as shown in the image below) is the area that is reachable from <u><i><b>both</b></i></u> source points in 10 minutes.</p>
                            <img class='img-responsive img-thumbnail' src="img/intersection_annotated.png">
                            <hr>
                            <h4>average</h4>
                            <p class="text-justify lead">The <b>average</b> options generates polygons based the average travel time for all source points. This means that an individual travel time can be higher than the travel time boundary, as shown in the picture below, as long as the average total travel time for all source points to a specific target (the marker with the <b>!</b>) is lower than the travel time boundary.</p>
                            <img class='img-responsive img-thumbnail' src="img/average_annotated.png">
                            <hr>
                            <p class="text-justify lead">
                                Please contact us if you want to have a specific intersection method like <a href="http://en.wikipedia.org/wiki/Kriging">Kriging</a> or <a href="http://en.wikipedia.org/wiki/Metaballs">Metaball</a> or <a href="http://en.wikipedia.org/wiki/Kernel_density_estimation">kernel density estimation</a>.
                            </p>
                        </p>
                        <h4>Travel times</h4>
                        <p class="text-justify lead">
                            This is an array of travel times for which you want to have polygons. This array has to only contain numbers. The values are represented in seconds. An example which requests polygons for 5 to 30 minutes in 5 minutes steps would be: <strong>[300, 600, 900, 1200, 1500, 1800]</strong>. You have to make sure that <code>r360.config.defaultTravelTimeControlOptions.travelTimes</code> contains a color for each entry. The defaults for this service are <i>walking</i> with polygons for 5 to 30 minutes in 5 minutes steps. 
                        </p>
                        <h4>Additional arguments:</h4>
                        <p class="text-justify lead">
                            You can set the travel type with <code>TravelOptions.setTravelType('type')</code>, where 'type' is one of the following four:
                        </p>
                        <dl class="dl-horizontal" style="font-size: 20px;">
                            <dt style="text-transform: lowercase;">walk</dt>
                            <dd>
                                This returns polygons which mark the area which are only reachable by foot. The default travel speed is 5 km/h. You can change the travel speed by <code>TravelOptions.setWalkSpeed(number)</code> which has to be a non-negative integer. If you want to punish uphill travel, you can set <code>TravelOptions.setWalkUphill(penalty)</code> to a high value (default is 10), or if you want to reward downhill travel you can set <code>TravelOptions.setDownhill(award)</code> with a positive value (the default is 0, so no award). Of course you can be extremely funny and switch the values so that you walk faster uphill then downhill, but please keep in mind that this only works if the server side has enabled elevation for your selected area.
                            </dd>
                            <dt style="text-transform: lowercase;">Bike</dt>
                            <dd>
                                This returns polygons which mark the area which are only reachable by bike. The default travel speed is 15 km/h. You can change the travel speed by <code>TravelOptions.setBikeSpeed(number)</code> which has to be a non-negative integer. If you want to punish uphill travel, you can set <code>TravelOptions.setBikeUphill(penalty)</code> to a high value (default is 20), or if you want to reward downhill travel you can set <code>TravelOptions.setDownhill(award)</code> with a positive value (the default is -10). Please keep in mind that this only works if the server side has enabled elevation for your selected area.
                            </dd>
                            <dt style="text-transform: lowercase;">Car</dt>
                            <dd>
                                This returns polygons which mark the area which are only reachable by bike. The default travel speed is determined by the speed limit tagged to a certain street in OpenStreetMaps. This option also considers one-way streets and traffic lights and other turning restrictions.
                            </dd>
                            <dt style="text-transform: lowercase;">Transit</dt>
                            <dd>
                                This returns polygons which mark the area which are reachable by transit. We perform a 'walk'-routing step from the starting point to the first transit station and from the last transit station to the target point. The connections are determined by the GTFS data supplied by the travel agencies of the given area. You can additionally set these parameters:
                                <dl class="dl-horizontal" style="font-size: 20px;">
                                    <dt style="text-transform: lowercase;">time</dt>
                                    <dd>
                                        This represents the time from when on a transit connection should be found. The time is represented by the difference, measured in seconds, between the current time and midnight, of today. For 2:45pm this would be ((45 * 60) + (14 * 60 * 60)) = 53100. This defaults to the current time and can be set by <code>TravelOptions.setTime(seconds)</code>. You can also use the <code>r360.Util.getHoursAndMinutesInSeconds()</code> method to get the current time.
                                    </dd>
                                    <dt style="text-transform: lowercase;">date</dt>
                                    <dd>This represents the date on which a transit connection should be found. The format of the date is YYYYMMDD, e.g.: 20140731 for the 31st of July in 2014. This defaults to the current date. You can also use the <code>r360.Util.getCurrentDate()</code> method to obtain a valid date for the service.</dd>
                                </dl> 
                            </dd>
                        </dl>
                        <div class="bs-callout bs-callout-warning">
                            <h4>Warning</h4>
                            <p>Please note that these polygons can get, especially for many and high travel times, pretty large in file size. We gzip them on the server side, but you have to make sure that you don't download 2MB polygons to your users smartphones over GPRS.</p>
                        </div>
                        <p class="text-justify lead"></p>
                    </div>
                    <!-- <div id="routeservice-api" style="display:none;">
                        <h3>TravelTime</h3>
                        <p>asd</p>
                        <h3>Detailed</h3>
                        <p>asd</p>
                        <h3>Compact</h3>
                        <p>asd</p>
                    </div>
                    <div id="timeservice-api" style="display:none;">
                        <h3>TimeService</h3>
                    </div>
                    <div id="controls-api" style="display:none;">
                        <h3>Route360° Map Controls</h3>
                    </div>
                    <div id="polygons-api" style="display:none;">
                        <h3>Polygons and Mulitpolygons</h3>
                    </div>
                    <div id="routes-api" style="display:none;">
                        <h3>Route and RouteSegments</h3>
                    </div>
                    <div id="polygonlayer-api" style="display:none;">
                        <h3>Route360°PolygonLayer</h3>
                    </div>
                    <div id="util-api" style="display:none;">
                        <h3>Util</h3>
                    </div> -->
                </div>
            </div>
        </div>
    </section>

    <section id="get-api-key" class="tutorials">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2><a href="#tutorials" style="color:white;">Request your Route360° API Key</a></h2>
                    <hr class="star-light">
                </div>
            </div>
            <div class="col-lg-12">
                <form class="form-horizontal" id="create-user-form">
                    <fieldset>

                        <!-- Text input-->
                        <div class="form-group">
                          <label class="col-md-4 control-label" for="firstname">First name</label>  
                          <div class="col-md-6">
                          <input style="padding-left: 15px;" id="firstname" name="firstname" type="text" placeholder="Please enter your first name" class="form-control input-md" required="">
                            
                          </div>
                        </div>

                        <!-- Text input-->
                        <div class="form-group">
                          <label class="col-md-4 control-label" for="lastname">Last name</label>  
                          <div class="col-md-6">
                          <input style="padding-left: 15px;" id="lastname" name="lastname" type="text" placeholder="Please enter your last name" class="form-control input-md" required="">
                            
                          </div>
                        </div>

                        <!-- Text input-->
                        <div class="form-group">
                          <label class="col-md-4 control-label" for="email">Email</label>  
                          <div class="col-md-6">
                          <input style="padding-left: 15px;" id="email" name="email" type="text" placeholder="Please enter your email address" class="form-control input-md" required="">
                            
                          </div>
                        </div>

                        <!-- Textarea -->
                        <div class="form-group">
                          <label class="col-md-4 control-label" for="region">Region</label>
                          <div class="col-md-6">                     
                            <textarea class="form-control input-md" id="region" name="region" placeholder="Please let us know for which region you are planning to use our API" required=""></textarea>
                          </div>
                        </div>

                        <!-- Textarea -->
                        <div class="form-group">
                          <label class="col-md-4 control-label" for="region">Phone/Skype</label>
                          <div class="col-md-6">                     
                            <textarea class="form-control input-md" id="phone" name="phone" placeholder="Let us call you right back" required=""></textarea>
                          </div>
                        </div>

                        <!-- Textarea -->
                        <div class="form-group">
                          <label class="col-md-4 control-label" for="description">Description</label>
                          <div class="col-md-6">                     
                            <textarea class="form-control input-md" width="100%" rows="3" id="description" name="description" placeholder="Please give us a short description of the project that you would like to do with the API." required=""></textarea>
                          </div>
                        </div>

                        <!-- Button -->
                        <div class="form-group">
                          <label class="col-md-4 control-label" for="submit"></label>
                          <div class="col-md-4">
                            <button type="submit" id="api-submit" class="btn btn-default">Request API Key</button>
                            <button type="button" class="btn btn-success"><a style="color: white; text-decoration: none;" target="_blank" href="https://www.route360.net/disclaimer/">Disclaimer</a></button>
                          </div>
                        </div>
                    </fieldset>
                </form>
            </div>
            <div class="col-lg-12" id="api-key-result">
                <div id="api-key-result-success" style="display:none;color: black;">
                    <div class="bs-callout bs-callout-info">
                        <h4>Registration successful</h4>
                        <p>
                            Congratulations, you have successfully generated your Route360° API key. As soon as you receive the confirmation email your account is activated. Your API key is <b id="api-key"></b>. The <i>r360.config.serviceUrl</i> for this developer preview is <b>http://api.route360.net/api_dev/</b>. <br>This preview is limited to the Berlin/Brandenburg area for now. If you need a different area please drop us a mail.<br>If you have any further questions please don't hesitate to contact us at <a href="mailto:developers@route360.net">developers@route360.net</a>.
                        </p>
                    </div>
                </div>
                <div class="api-key-result-error" style="display:none">
                    <div class="bs-callout bs-callout-danger" style="color: black;">
                        <h4>Registration unsuccessful</h4>
                        <p>
                            Something went wrong during your registration. Please try again or contact us at <a href="mailto:developers@route360.net">developers@route360.net</a>.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="success maps" id="maps">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2><i class="fa fa-globe"></i> Custom Maps</h2>
                    <hr class="star-light">
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <p>
                        You need your own custom map style? Please contact us at <code><a href="mailto:developers@route360.net">developers@route360.net</a></code> and we will generate a beautiful map style that fits <i>your</i> design.
                    </p>    
                </div>
            </div>
            <div class="row text-center">
                <h1>Example: Low contrast</h1>
                <div class="col-lg-12">
                    <div id="map-one"></div>
                </div>
            </div>
            <div class="row text-center" style="margin-top: 20px;">
                <h1>Example: Focus on nature</h1>
                <div class="col-lg-12">
                    <div id="map-two"></div>
                </div>
            </div>
        </div>
    </section>

    <section id="faq">
        <div class="container">
            <div class="col-lg-12 text-center">
                <h2>Frequently asked questions</h2>
                <hr class="star-primary">
            </div>
            <div class="container">
                <h3 style='align:left;'>0. Why is my totally important question not in the FAQ?</h3>
                <p class="text-justify lead">Please don't hesitate to spam me with questions via <a href="mailto:developers@route360.net">mail</a>. I'm happy to add more questions day and night.</p>

                <h3 style='align:left;'>1. Is this service available for my geographic region?</h3>
                <p class="text-justify lead">Car, walk, and bike routing are possible worldwide as long as there is some data in OpenStreetMaps. For transit routing please have a look at <a href="http://www.gtfs-data-exchange.com/">GTFS data exchange</a>.</p>
                
                <h3 style='align:left;'>2. How can I set the travel type for each source individually?</h3>
                <p class="text-justify lead">Each source which is added to the travel options needs to have an attribute called travelType. This filed may contain one of the following values: <b>walk</b>, <b>bike</b>, <b>transit</b> or <b>car</b>.</p>

                <h3 style='align:left;'>3. Where do I get my API key?</h3>
                <p class="text-justify lead">You can use the registration service <a href="#get-api-key">here</a>. If something goes wrong please contact as at <a href="mailto:developers@route360.net">developers@route360.net</a>!</p>
            </div>
        </div>
    </section>

    <footer class="text-center">
        <div class="footer-above">
            <div class="container">
                <div class="row">
                    <div class="footer-col col-md-2"></div>
                    <div class="footer-col col-md-4">
                        <h3>Location</h3>
                        <p>Motion Intelligence GmbH <br>   
                            August-Bebel-Str. 26-53 <br>
                            D-14482 Potsdam
                        </p>
                    </div>
                    <div class="footer-col col-md-4">
                        <h3>Contact us at</h3>
                        <ul class="list-inline">
                            <li>Tel: +49(0)30 - 920383 5420</li>
                            <li>Fax: +49(0)30 - 920383 4521</li>
                            <li><a href="http://www.motionintelligence.net">www.motionintelligence.net</a></li>
                            <li><a href="mailto:developers@route360.net">developers@route360.net</a></li>
                        </ul>
                    </div>
                    <div class="footer-col col-md-2"></div>
                </div>
            </div>
        </div>
        <div class="footer-below">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        Copyright &copy; 2014 - Motion Intelligence GmbH
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <div class="scroll-top page-scroll visible-xs visble-sm">
        <a class="btn btn-primary" href="#page-top">
            <i class="fa fa-chevron-up"></i>
        </a>
    </div>

    <!-- Piwik -->
    <script type="text/javascript">
      var _paq = _paq || [];
      _paq.push(['trackPageView']);
      _paq.push(['enableLinkTracking']);
      (function() {
        var u=(("https:" == document.location.protocol) ? "https" :  
    "http") + "://www.route360.net/analytics/";
        _paq.push(['setTrackerUrl', u+'piwik.php']);
        _paq.push(['setSiteId', 7]);
        var d=document, g=d.createElement('script'),  
    s=d.getElementsByTagName('script')[0]; g.type='text/javascript';
        g.defer=true; g.async=true; g.src=u+'piwik.js';  
    s.parentNode.insertBefore(g,s);
      })();
    </script>
    <noscript><p><img  
    src="http://www.route360.net/analytics/piwik.php?idsite=7"  
    style="border:0;" alt="" /></p></noscript>
    <!-- End Piwik Code -->

    <script src="lib/jquery/jquery-1.10.2.js"></script>
    <script src="lib/bootstrap/bootstrap.min.js"></script>
    <script src="lib/jquery/jquery-ui-1.10.4.min.js"></script>
    <script src="lib/jquery/jquery.validate.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
    <script src="lib/freelancer/classie.js"></script>
    <script src="lib/freelancer/cbpAnimatedHeader.js"></script>
    <script src="lib/freelancer/freelancer.js"></script>
    <script src="lib/prettify/prettify.js"></script>
    <script src="lib/leaflet/leaflet.js"></script>
    <script src="lib/underscore/underscore.js"></script>
    <script src="lib/r360/museums_bb.js"></script>

    <!-- // <script src="js/r360.js"></script> -->

    <script type="text/javascript" src="lib/build/deps.js"></script>
    <script type="text/javascript" src="lib/build/r360-include.js"></script>

     <!-- Import Examples -->

    <script src="lib/r360/examples/addPlaceAutoCompleteControl.js"></script>
    <script src="lib/r360/examples/addTravelStartDateControl.js"></script>
    <script src="lib/r360/examples/addTravelTimeControl.js"></script>
    <script src="lib/r360/examples/addTravelTypeControl.js"></script>
    <script src="lib/r360/examples/filterExample.js"></script>
    <script src="lib/r360/examples/multipleExample.js"></script>
    <script src="lib/r360/examples/routingExample.js"></script>
    <script src="lib/r360/examples/htmlControlExample.js"></script>
    <script src="lib/r360/examples/gettingStartedExample.js"></script>
    <script src="lib/r360/examples/inverseExample.js"></script>

    <!-- Code for example 1 -->
    <script type="text/javascript">
        $(document).ready(function(){

            gettingStartedExample();
            $('#gettingstarted-code').text(gettingStartedExample.toString());
            !function ($) { $(function(){ window.prettyPrint && prettyPrint() })}(window.jQuery);
        });
    </script>

    <script type="text/javascript">
        $(document).ready(function(){

            $('#polygonservice-nav').click(function(){
                $('#api-menu > li').removeClass('active');
                $('#polygonservice-nav').parent().addClass('active');
                $('#api-content').html($('#polygonservice-api').html());
            });
            $('#routeservice-nav').click(function(){

                $('#api-menu > li').removeClass('active');
                $('#routeservice-nav').parent().addClass('active');
                $('#api-content').html($('#routeservice-api').html());
            });
            $('#timeservice-nav').click(function(){
                $('#api-menu > li').removeClass('active');
                $('#timeservice-nav').parent().addClass('active');
                $('#api-content').html($('#timeservice-api').html());
            });
            $('#controls-nav').click(function(){
                $('#api-menu > li').removeClass('active');
                $('#controls-nav').parent().addClass('active');
                $('#api-content').html($('#controls-api').html());
            });
            $('#polygons-nav').click(function(){
                $('#api-menu > li').removeClass('active');
                $('#polygons-nav').parent().addClass('active');
                $('#api-content').html($('#polygons-api').html());
            });
            $('#routes-nav').click(function(){
                $('#api-menu > li').removeClass('active');
                $('#routes-nav').parent().addClass('active');
                $('#api-content').html($('#routes-api').html());
            });
            $('#polygonlayer-nav').click(function(){
                $('#api-menu > li').removeClass('active');
                $('#polygonlayer-nav').parent().addClass('active');
                $('#api-content').html($('#polygonlayer-api').html());
            });
            $('#util-nav').click(function(){
                $('#api-menu > li').removeClass('active');
                $('#util-nav').parent().addClass('active');
                $('#api-content').html($('#util-api').html());
            });

// ----------------------------------------------------------------------------------------------------------------
// ----------------------------------------------------------------------------------------------------------------
// ----------------------------------------------------------------------------------------------------------------
// ----------------------------------------------------------------------------------------------------------------

    var mapOne = L.map('map-one').setView([47.050314, 8.307765], 13);
    var mapTwo = L.map('map-two').setView([47.050314, 8.307765], 13);
    var attribution = "&copy; <a href='http://osm.org/copyright'>OpenStreetMap</a> contributors | designed by <a href='http://www.route360.net/de/' target='_blank'>Route360°</a> | <a href='https://www.mapbox.com/'>MapBox</a>";

    L.tileLayer('https://a.tiles.mapbox.com/v3/mi.0ad4304c/{z}/{x}/{y}.png', { maxZoom: 18, attribution: attribution }).addTo(mapOne);
    L.tileLayer('https://a.tiles.mapbox.com/v3/mi.0e455ea3/{z}/{x}/{y}.png', { maxZoom: 18, attribution: attribution }).addTo(mapTwo);

// ----------------------------------------------------------------------------------------------------------------
// ----------------------------------------------------------------------------------------------------------------
// ----------------------------------------------------------------------------------------------------------------
// ----------------------------------------------------------------------------------------------------------------

            $('#travelTimecontrol-nav').click(function(){

                $('#tutorial-menu > li').removeClass('active');
                $('#travelTimecontrol-nav').parent().addClass('active');

                $('#tutorial-content').html(' \
                        <h3>Adding a travel time control</h3> \
                        <p class="text-justify lead">In this tutorial, we will show you how to add a <code>TravelTimeControl</code> to the map and add behaviour to it, so that users can select different travel times and the map is automatically updated with larger or smaller (timely speaking) polygons. This tutorial builds up on the getting started section, so if you haven\'t done this already, go ahead and show some polygons! In any case, enjoy!</p> \
                        <div id="map-addTravelTimeControlExample"></div> \
                        <p class="text-justify lead">And the code with explanations:</p> \
                        <pre class="prettyprint" id="addTravelTimeControlExample"></pre>');

                addTravelTimeControl();
                $('#addTravelTimeControlExample').text(addTravelTimeControl.toString());
                !function ($) { $(function(){ window.prettyPrint && prettyPrint() })}(window.jQuery);
            });

            $('#traveltypecontrol-nav').click(function(){

                $('#tutorial-menu > li').removeClass('active');
                $('#traveltypecontrol-nav').parent().addClass('active');

                $('#tutorial-content').html(' \
                        <h3>Adding a travel type control</h3> \
                        <p class="text-justify lead">In this tutorial, we will show you how to add a <code>RadioButtonControl</code> to the map and add behaviour to it, so that users can select different travel type, like bike, car or walk, and the map is automatically updated with the calculated polygons. You can use this <code>RadioButtonControl</code> for anything you want, e.g. select different travel speeds for fast or slow bikers.</p> \
                        <div id="map-addTravelTypeControlExample"></div> \
                        <p class="text-justify lead">And the code with explanations:</p> \
                        <pre class="prettyprint" id="addTravelTypeControlExample"></pre>');

                addTravelTypeControl();
                $('#addTravelTypeControlExample').text(addTravelTypeControl.toString());
                !function ($) { $(function(){ window.prettyPrint && prettyPrint() })}(window.jQuery);
            });

            $('#travelstartdatecontrol-nav').click(function(){

                $('#tutorial-menu > li').removeClass('active');
                $('#travelstartdatecontrol-nav').parent().addClass('active');

                $('#tutorial-content').html(' \
                        <h3>Adding a travel start date and time control for public transportation</h3> \
                        <p class="text-justify lead">I this tutorial, we will examplify how to display polygons for public transportation. Since public transportation is time and date dependent, it follows a given schedule, we need a way to select the time and date the user wants to travel. There are two controls, the  <code>TravelStartTimeControl</code> and <code>TravelStartDateControl</code> which are able to do just that. Since those polygon request, especially for routing times close to 2 hours, might take some time, we also add a <code>WaitControl</code> to the map. So here is the result of this tutorial: </p> \
                        <div id="map-addTravelStartDateControlExample"></div> \
                        <p class="text-justify lead">And the code with explanations:</p> \
                        <pre class="prettyprint" id="addTravelStartDateControlExample"></pre>');

                addTravelStartDateControl();
                $('#addTravelStartDateControlExample').text(addTravelStartDateControl.toString());
                !function ($) { $(function(){ window.prettyPrint && prettyPrint() })}(window.jQuery);
            });

            $('#geocodingcontrol-nav').click(function(){

                $('#tutorial-menu > li').removeClass('active');
                $('#geocodingcontrol-nav').parent().addClass('active');

                $('#tutorial-content').html(' \
                        <h3>Adding place autocompletion for variable source points</h3> \
                        <p class="text-justify lead">In this tutorial we will show you how to use the Route360° geocoding service to be able to let users enter for example there home address. We will add a <code>PlaceAutoCompleteControl</code> to the map and bind an action to add or move the marker as well as clearing already shown polygons. The <code>PlaceAutoCompleteControl</code> also offers the ability to add to buttons to it. One button is used to delete already made user inputs and the other should be used to switch source and target for a routing request. The latter will be covered in another tutorial. We will also show you how to update the input field in case the user drags a marker on the map. This can be done through reverse geocoding, which the Route360° API makes really easy.<br/>To not loose track which autocomplete belongs to which marker on the map, we also show how you can use a marker image to visualize the connection.</p><p class="text-justify lead">This service is based on <code>Photon</code>, an open source geocoder built for OpenStreetMap data that you can setup yourself. Checkout and star the project on <a href="https://github.com/komoot/photon">github</a>!</p> \
                        <div id="map-addPlaceAutoCompleteControlExample"></div> \
                        <p class="text-justify lead">And the code with explanations:</p> \
                        <pre class="prettyprint" id="addPlaceAutoCompleteControlExample"></pre>');

                addPlaceAutoCompleteControl();
                $('#addPlaceAutoCompleteControlExample').text(addPlaceAutoCompleteControl.toString());
                !function ($) { $(function(){ window.prettyPrint && prettyPrint() })}(window.jQuery);
            });

            $('#routing-nav').click(function(){

                $('#tutorial-menu > li').removeClass('active');
                $('#routing-nav').parent().addClass('active');

                $('#tutorial-content').html(' \
                        <h3>Routing to targets</h3> \
                        <p class="text-justify lead">In this tutorial we will show you how you can use the <code>RouteService</code> to get routing information for a specific target. You can even specify a list of targets and the service will return you travel information for all of them. Please note that you can specify different routing result granularity levels (see API documentation). We will use the default level in this example. To summerize, we will add a source and two target markers and use public transportation to get from A to B. We will also add a little circle if people have to switch rides on their travel.</p> \
                        <div id="map-routingExample"></div> \
                        <p class="text-justify lead">And the code with explanations:</p> \
                        <pre class="prettyprint" id="routingExample"></pre>');

                routingExample();
                $('#routingExample').text(routingExample.toString());
                !function ($) { $(function(){ window.prettyPrint && prettyPrint() })}(window.jQuery);
            });

            $('#filter-nav').click(function(){

                $('#tutorial-menu > li').removeClass('active');
                $('#filter-nav').parent().addClass('active');

                $('#tutorial-content').html(' \
                        <h3>Filter points of interest by travel time</h3> \
                        <p class="text-justify lead">In this tutorial we will show you how you can use the <code>TimeService</code> to filter a list of your entities by travel time, starting from a source location. In our case we will use all museums from OpenStreetMaps which have a none empty <i>name</i> and <i>website</i>. The marker for these museums will be scaled with respect to the travel time from the source. With this feature users can instantly see which points of interest are closest to them, with respect to the actual travel time and not just beeline. Note that this would not be possible with traditional routing services like Google Maps, since you would have to make one request per place of interest.</p> \
                        <div id="map-filterExample"></div> \
                        <p class="text-justify lead">And the code with explanations:</p> \
                        <pre class="prettyprint" id="filterExample"></pre>');

                filterExample();
                $('#filterExample').text(filterExample.toString());
                !function ($) { $(function(){ window.prettyPrint && prettyPrint() })}(window.jQuery);
            });

            $('#multiple-nav').click(function(){

                $('#tutorial-menu > li').removeClass('active');
                $('#multiple-nav').parent().addClass('active');

                $('#tutorial-content').html(' \
                        <h3>Multiple travel time polygons</h3> \
                        <p class="text-justify lead">Sometimes it might be useful to visual multiple travel time polygons on the same map. For example consider the use case where three friends want to meet in a certain beer pouring establishment, a.k.a bar or pub. You can select three different starting points and get polygons for all three points in a single request. Additionally you can select the method on how the server intersects the polygons. With this method you can generate polygons which only show areas that all users can reach in a given time. Please see the <code>PolygonService API</code> for a complete list of available intersection methods.</p> \
                        <div id="map-multipleExample"></div> \
                        <p class="text-justify lead">And the code with explanations:</p> \
                        <pre class="prettyprint" id="multipleExample"></pre>');

                multipleExample();
                $('#multipleExample').text(multipleExample.toString());
                !function ($) { $(function(){ window.prettyPrint && prettyPrint() })}(window.jQuery);
            });

            $('#inverse-nav').click(function(){

                $('#tutorial-menu > li').removeClass('active');
                $('#inverse-nav').parent().addClass('active');

                $('#tutorial-content').html(' \
                        <h3>Displaying polygons in black and white </h3> \
                        <p class="text-justify lead"> \
                            Sometimes it might be helpful to not display the colored areas that can be reached from a certain location \
                            but to hide areas that are not reachable. In order to do that we created the black and white polygons, or inverse \
                            polygonization as we call it. If you only request a single travel time, and this is probably the most common use case \
                            for this feature (but you can specify as much as you want, see the example below), you can dramatically decrease \
                            processing time on the server side and as a side effect decrease the size of the returned polygon. This might be \
                            especially helpful in mobile environments, where bandwidth is the limit. Additionally, this also helps on slower \
                            machines (mobile phones aren\'t super computers, yet) to convert the returned polygon to SVG. Zooming and panning \
                            should be much smoother with this setting. <br> \
                            You can also adjust the surrounding background color and its opacity as the example shows. \
                        </p> \
                        <div id="map-inverseExample"></div> \
                        <p class="text-justify lead">And the code with explanations:</p> \
                        <pre class="prettyprint" id="inverseExample"></pre>');

                inverseExample();
                $('#inverseExample').text(inverseExample.toString());
                !function ($) { $(function(){ window.prettyPrint && prettyPrint() })}(window.jQuery);
            });

            $('#htmlControl-nav').click(function(){

                $('#tutorial-menu > li').removeClass('active');
                $('#htmlControl-nav').parent().addClass('active');

                $('#tutorial-content').html(' \
                        <h3>Displaying html content on the map</h3> \
                        <p class="text-justify lead">In case you have a map only view, it sometimes might help to have the ability to display results on the map. Consider the example where you are searching for an apartments and click on a marker. You probably want to show the routes from the source points to the target apartment. You can use a simple HTML leaflet control to display this. (or in our demo case to show some kittens :)</p> \
                        <div id="map-htmlControlExample"></div> \
                        <p class="text-justify lead">And the code with explanations:</p> \
                        <pre class="prettyprint" id="htmlControlExample"></pre>');

                htmlControlExample();
                $('#htmlControlExample').text(htmlControlExample.toString());
                !function ($) { $(function(){ window.prettyPrint && prettyPrint() })}(window.jQuery);
            });

// ------------------------------------------------------------------------------------
// ------------------------------------------------------------------------------------
// ------------------------------------------------------------------------------------
// ------------------------------------------------------------------------------------

            var url = $(window.location).attr("href");
            // some link on the page was clicked
            if ( url.lastIndexOf('#') > 0 ) {

                // get the link
                var segment = url.substring(url.lastIndexOf('#') + 1);

                // api section
                if ( _.contains(['polygonservice', 'routeservice', 'timeservice', 'util', 'polygonlayer', 'routes', 'polygons', 'controls'], segment) ) {
                    
                    $('#'+segment+'-nav').trigger( "click" );
                    $('html, body').animate({ scrollTop: $('#api').offset().top }, 1000);
                }
                // tutorial section
                else {

                    $('#'+segment+'-nav').trigger( "click" );
                    $('html, body').animate({ scrollTop: $('#tutorials').offset().top }, 1000);
                }
            } 

            !function ($) { $(function(){ window.prettyPrint && prettyPrint() })}(window.jQuery);

// -------------------------------------------------------------------------------------
// -------------------------------------------------------------------------------------
// -------------------------------------------------------------------------------------
// -------------------------------------------------------------------------------------
            
            $("#create-user-form").validate({
                rules: {
                    firstname: {
                        required: true
                    },
                    lastname: {
                        required: true
                    },
                    phone : {
                        required: true  
                    },
                    email: {
                        required:   true,
                        email:      true,
                        remote: {
                            url: r360.config.serviceUrl + r360.config.serviceVersion + '/apiKey/check?key=' + r360.config.serviceKey,
                            type: "get",
                            data: {
                                email : function() {
                                    return $( "#email" ).val();
                                }
                            }
                        }
                    },
                    region: {
                        required: true
                    },
                    description: {
                        required: true
                    }
                },
                messages : {
                    email : {
                        remote : "This email address is already registered for the Route360° API."
                    }
                },
                highlight: function (element) {

                    $(element).closest('.form-group').removeClass('has-success').addClass('has-error');
                },
                success: function (element) {
                    
                    element.addClass('valid').closest('.form-group').removeClass('has-error').addClass('has-success');
                },
                submitHandler: function(form) {

                    $('#api-submit').prop('disabled', true);

                    var params = ['firstname=' + $("#firstname").val(), 
                                  'lastname=' + $("#lastname").val(), 
                                  'email=' + $("#email").val()];

                    $.getJSON(r360.config.serviceUrl + r360.config.serviceVersion + '/apiKey?' + params.join("&") + '&key=' + r360.config.serviceKey, 
                        function(result){   

                            $("#api-key").html(result.apiKey);
                            $("#api-key-result-success").show();
                            $("#api-key-result-error").hide();

                            $.post("sendmail.php", 
                                { 
                                    to      : ["developers@route360.net", result.email].join(", "), 
                                    from    : "developers@route360.net", 
                                    subject : "Route360° API Key", 
                                    message : generateEmail(result.apiKey, $("#region").val(), $("#description").val(), $("#phone").val())
                                }
                            );
                        })
                        .fail(function(jqXHR, status, error){

                            $.post("sendmail.php", 
                                { 
                                    to      : "developers@route360.net", 
                                    from    : "developers@route360.net", 
                                    subject : "Error while creating new user", 
                                    message : "The user with " + $("#email").val() + " could not register!"
                                }
                            );

                            $("#api-key-result-success").hide();
                            $("#api-key-result-error").show();
                        });
                }
            });

            function generateEmail(key, region, description, phone) {

                return "<html><head></head><body> \
                    <p>Congratulations, you have successfully generated your Route360° API key. Your account is now activated. Your API key is <b>"+key+"</b>. The <i>r360.config.serviceUrl</i> for this developer preview is <b>http://api.route360.net/api_dev/</b>. <br>This preview is limited to the Berlin/Brandenburg area for now. If you need a different area please drop us a mail.<br>If you have any further questions please don't hesitate to contact us at <a href='mailto:developers@route360.net'>developers@route360.net</a>.</p> \
                    <h4>Phone/Skype</h4> \
                    <p>" + phone + "</p> \
                    <h4>Region</h4> \
                    <p>" + region + "</p> \
                    <h4>Description</h4> \
                    <p>" + description + "</p> \
                    </body></html>";
            }
        });
    </script>
</body>

</html>
